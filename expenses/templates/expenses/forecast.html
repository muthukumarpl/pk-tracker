{% extends 'expenses/base.html' %}

{% block content %}
<div class="container py-5 text-center">
    <h2 class="fw-bold text-white mb-4">Financial Future Forecast ğŸ”®</h2>
    <p class="text-light opacity-75 mb-5">Based on your last 30 days of spending habits.</p>

    <div class="row g-4 justify-content-center">
        <div class="col-md-4">
            <div class="forecast-card p-4 rounded-4 shadow">
                <h5 class="text-warning">Daily Average</h5>
                <h2 class="display-6 fw-bold text-white">â‚¹{{ daily_average }}</h2>
                <p class="small text-light">You spend this much every day on average.</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="forecast-card p-4 rounded-4 shadow highlight">
                <h5 class="text-info">Predicted Monthly</h5>
                <h2 class="display-6 fw-bold text-white">â‚¹{{ predicted_monthly }}</h2>
                <p class="small text-light">Estimated total expense for the next 30 days.</p>
            </div>
        </div>

        <div class="col-md-4">
            <div class="forecast-card p-4 rounded-4 shadow">
                <h5 class="text-success">Potential Savings</h5>
                <h2 class="display-6 fw-bold text-white">â‚¹{{ potential_savings }}</h2>
                <p class="small text-light">Money you can save if you maintain this habit.</p>
            </div>
        </div>
    </div>

    <div class="mt-5 p-4 rounded-4 shadow comparison-section">
        <h4 class="text-white mb-4">Spent vs Investment Ratio ğŸ“Š</h4>

        <div class="progress mb-3" style="height: 35px; border-radius: 20px; background: #f64f59; border: 2px solid rgba(255,255,255,0.1);">
            <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
                 role="progressbar"
                 style="width: {{ invest_ratio }}%;"
                 aria-valuenow="{{ invest_ratio }}" aria-valuemin="0" aria-valuemax="100">
                 <span class="fw-bold">Investment {{ invest_ratio }}%</span>
            </div>
        </div>

        <div class="row mt-3 text-light">
            <div class="col-6 text-start">
                <span class="badge bg-danger p-2">ğŸ“‰ Daily Expenses</span>
                <p class="mt-2 fs-5 fw-bold text-white">â‚¹{{ total_spent }}</p>
            </div>
            <div class="col-6 text-end">
                <span class="badge bg-success p-2">ğŸ“ˆ Total Investment</span>
                <p class="mt-2 fs-5 fw-bold text-white">â‚¹{{ total_investment }}</p>
            </div>
        </div>

        <div class="mt-4 p-3 rounded-3 advice-box">
            {% if invest_ratio < 20 %}
                <p class="text-warning mb-0">ğŸ’¡ <strong>Pro Tip:</strong> Your investment is below 20%. Try to increase your investments to build long-term wealth!</p>
            {% else %}
                <p class="text-info mb-0">ğŸŒŸ <strong>Excellent!</strong> You have a healthy investment habit. You are building a secure financial future!</p>
            {% endif %}
        </div>
    </div>

    <div class="mt-5 p-4 rounded-4 bg-dark border border-warning">
        {% if potential_savings < 0 %}
            <h4 class="text-danger">âš ï¸ Warning!</h4>
            <p class="text-white">Your predicted spending exceeds your total income. Time to cut down expenses!</p>
        {% else %}
            <h4 class="text-success">âœ… Looking Good!</h4>
            <p class="text-white">You are on track to save â‚¹{{ potential_savings }} this month. Keep it up!</p>
        {% endif %}
    </div>
</div>

<style>
    .forecast-card {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: 0.3s;
    }
    .forecast-card:hover {
        transform: translateY(-10px);
        background: rgba(255, 255, 255, 0.15);
    }
    .highlight {
        border: 2px solid #12c2e9 !important;
        box-shadow: 0 0 20px rgba(18, 194, 233, 0.3);
    }
    .comparison-section {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255,255,255,0.1);
        backdrop-filter: blur(5px);
    }
    .advice-box {
        background: rgba(0,0,0,0.3);
        border-left: 5px solid #ffc107;
    }
    .progress-bar {
        font-size: 1rem;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }
</style>
{% endblock %}